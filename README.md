# TaskManager
 ## Эндроинты
  ### Модуль авторизации
  * `GET` `/auth/login` - Авторизация через Github
  * `GET` `auth/github/callback` - callback от Github
  * `GET` `/auth/logout` - Выход из аккаунта
  * `GET` `/auth/refresh` - Обновление access token
  ### Модуль email рассылки
  * `POST` `/email/send` - Запрос на отправку письма с кодом
  * `GET` `email/confirm/{code}` - Проверка кода
  ### Модуль управления
  #### Аудит
  * `GET` `history/{project_id}/all` - Получить все записи аудита для проекта(доступно только участникам проекта с определенными правами)
  * `GET` `history/{project_id}/` - Получить отфильтрованные записи аудита(доступно только участникам проекта с определенными правами)
  #### Ссылки
  * `POST` `/links/{project_id}/generate` - Генерирует ссылку на проект
  * `GET` `/links/invite/{code}` - Полуние информации о проекте по коду приглашения
  * `POST` `/links/invite/{code}/accept` - Принятие приглашения и присоединение к проекту
  * `GET` `/links/{project_id}/links` - Получение всех ссылок-приглашений проекта
  * `DELETE` `/links/{project_id}/clear` - Удаление всех ссылок-приглашений проекта
  * `DELETE` `links/{project_id}/{link_code}/delete` - Удаление ссылки-приглашения по коду
  #### Проекты
  * `POST` `/project/create` - Создать проект
  * `GET` `/project/{project_id}` - Получить информацию о проекте по ID(только для участников проекта)
  * `PUT` `/project/{project_id}/edit` - Изменить информацию о проекте(только для участников с соответствующими правами)
  * `GET` `/project/{project_id}/members` - Получение участников проекта
  * `PUT` `/project/{project_id}/change_default_role/{role_id}` - Изменить роль по умолчанию в проекте
  * `DELETE` `project/{project_id}/delete-member/{member_id}` - Удалить пользователя из проекта
 #### Роли 
  * `GET` `/roles/project/{project_id}` - Получить все роли проекта
  * `POST` `/roles/project/{project_id}/new` - Создать роль для проекта(Только для участников с соответствующими правами)
  * `PUT` `/roles/project/{project_id}/role/{role_id}/update` - Изменить права/приоритет роли(Только для участников с соответствующими правами)
  * `DELETE` `/roles/project/{project_id}/role/{role_id}/delete` - Удалить роль(Только для участников с соответствующими правами)
  * `PUT` `/roles/{project_id}/member/{member_id}/update-role/{role_id}` - Изменить роль участника(Только для участников с соответствующими правами)
#### Задачи
  * `POST` `/tasks/project/{project_id}/create` - Создать задачу(Только для участников с соответствующими правами)
  * `PUT` `/tasks/project/{project_id}/update/{task_id}` - Изменить задачу(Только для участников с соответствующими правами)
  * `DELETE` `/tasks/project/{project_id}/delete/{task_id` - Удалить задачу(Только для участников с соответствующими правами)
  * `GET` `/tasks/project/{project_id}/get/{task_id}` - Получить информацию о задаче
  * `PUT` `/tasks/{project_id}/{task_id}/complete` - Изменить статус задачи на "Выполнено"
  * `GET` `/tasks/project/{project_id}/tasks` - Получить все задачи проекта
## Описание функционала 
### RBAC - Ролевая модель
В проекте реализована ролевая модель доступа к информации внутри проекта для каждого проекта создается 2 роли: **Владелец** и **Пользователь**.
Все роли имеют свой приоритет от `1` до `10`, приоритет `10` имеет только роль **Владелец**.
Это нужно чтобы пользователи, которые имеют одинаковые права, например, право **Выгнать участника** не могли выгнать участника с ролью, у которой приоритет выше.
Роль по умолчанию можно изменить.
Минимально в проекте должно быть 2 роли: триггеры не дадут удалить роль, если это роль будет последней, чей приоритет не равен 10
### Аудит
Все важные действия пользователей внутри проекта сохраняются в аудит и хранятся там 48часов
### Пригласительные ссылки
Участники проекта с соответствующими правами могут генерировать пригласительные ссылки, ссылки могут иметь разный срок жизни от 1 часа до бессрочного срока жизни, максимальное количество единовременно активных ссылок для проекта `100`.
Неактивные ссылки очищаются из базы данных каждый час

  



